version: 2
updates:
  # Enable version updates for Terraform
  - package-ecosystem: "terraform"
    directory: "/"
    schedule:
      interval: "weekly"
      day: "monday"
      time: "09:00"
    open-pull-requests-limit: 10
    reviewers:
      - "edwinkassier"
    assignees:
      - "edwinkassier"
    labels:
      - "dependencies"
      - "terraform"
    commit-message:
      prefix: "chore"
      prefix-development: "chore"
      include: "scope"
    pull-request-branch-name:
      separator: "/"

  # Check for updates in modules/cloud_run
  - package-ecosystem: "terraform"
    directory: "/modules/cloud_run"
    schedule:
      interval: "weekly"
    open-pull-requests-limit: 5
    labels:
      - "dependencies"
      - "module:cloud_run"

  # Check for updates in modules/cloud_functions
  - package-ecosystem: "terraform"
    directory: "/modules/cloud_functions"
    schedule:
      interval: "weekly"
    open-pull-requests-limit: 5
    labels:
      - "dependencies"
      - "module:cloud_functions"

  # Check for updates in modules/cloud_storage
  - package-ecosystem: "terraform"
    directory: "/modules/cloud_storage"
    schedule:
      interval: "weekly"
    open-pull-requests-limit: 5
    labels:
      - "dependencies"
      - "module:cloud_storage"

  # Check for updates in modules/network/vpc
  - package-ecosystem: "terraform"
    directory: "/modules/network/vpc"
    schedule:
      interval: "weekly"
    open-pull-requests-limit: 5
    labels:
      - "dependencies"
      - "module:vpc"

  # Check for updates in modules/iam/organisation
  - package-ecosystem: "terraform"
    directory: "/modules/iam/organisation"
    schedule:
      interval: "weekly"
    open-pull-requests-limit: 5
    labels:
      - "dependencies"
      - "module:iam"

  # Check for updates in envs/organisation
  - package-ecosystem: "terraform"
    directory: "/envs/organisation"
    schedule:
      interval: "weekly"
    open-pull-requests-limit: 5
    labels:
      - "dependencies"
      - "env:organisation"

  # Check for updates in envs/dev
  - package-ecosystem: "terraform"
    directory: "/envs/dev"
    schedule:
      interval: "weekly"
    open-pull-requests-limit: 5
    labels:
      - "dependencies"
      - "env:dev"

  # Check for updates in envs/uat
  - package-ecosystem: "terraform"
    directory: "/envs/uat"
    schedule:
      interval: "weekly"
    open-pull-requests-limit: 5
    labels:
      - "dependencies"
      - "env:uat"

  # Check for updates in envs/prod
  - package-ecosystem: "terraform"
    directory: "/envs/prod"
    schedule:
      interval: "weekly"
    open-pull-requests-limit: 3
    labels:
      - "dependencies"
      - "env:prod"
      - "critical"

  # GitHub Actions workflows
  - package-ecosystem: "github-actions"
    directory: "/"
    schedule:
      interval: "weekly"
      day: "monday"
    open-pull-requests-limit: 5
    reviewers:
      - "edwinkassier"
    labels:
      - "dependencies"
      - "github-actions"
    commit-message:
      prefix: "ci"

